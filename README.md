# Wikipedia Semantic Search Engine

## Overview
This repository contains Python code for creating a semantic search engine using embeddings generated by the Gemini 2.0 Flash model (accessed via an OpenAI-compatible API endpoint). The search engine processes Wikipedia pages to create embeddings of questions extracted from the content, allowing users to find related Wikipedia pages based on semantic similarity.

## Project Structure

- `structures.py`: Defines data structures (`WikiPage`, `Entry`, and `Database`) for handling Wikipedia page data and embeddings.
- `iter_test.py`: Parses Wikipedia XML dumps (BZ2 compressed) and iterates over individual pages, extracting titles, URLs, and content.
- `create_questions.py`: Uses the Gemini 2.0 Flash model to generate relevant questions based on Wikipedia page content.
- `create_embeddings.py`: Generates embeddings for given questions using the Gemini embedding model.
- `create_db.py`: Combines the above modules to create a database of question embeddings linked to Wikipedia page metadata, saving the resulting database as a pickled file.
- `search_engine.py`: Provides a command-line interface to query the generated embeddings database and retrieves the most semantically similar Wikipedia page entry to a user-provided question.

## Setup and Installation

### Requirements

- Python 3.9 or higher
- Required libraries:
  ```
  openai
  numpy
  scikit-learn
  ```

Install the necessary libraries with:

```bash
pip install openai numpy scikit-learn
```

### API Key

Store your API key for Gemini embeddings in a file named `keys.txt`:

```bash
echo "YOUR_API_KEY" > keys.txt
```

Ensure the base URL is correctly set for your Gemini API endpoint.

## Usage

### 1. Creating the Database

Run the following command to process Wikipedia XML data and generate embeddings:

```bash
python create_db.py
```

The embeddings and metadata will be stored in `database.pkl`.

### 2. Searching the Database

Query the database by providing a question as an argument:

```bash
python search_engine.py --question "Your query here"
```

The script will return the most similar question from the database along with the related Wikipedia page.

## Algorithm Summary

The semantic search is powered by embeddings generated using Gemini's embedding model. The embeddings capture semantic meaning, enabling the search engine to perform similarity searches based on Euclidean distance using scikit-learn's Nearest Neighbors algorithm.

The workflow is as follows:

1. Parse Wikipedia XML dumps and extract page content.
2. Generate representative questions from page content using Gemini.
3. Generate semantic embeddings for each question.
4. Store embeddings and associated metadata in a database.
5. Perform similarity searches on query embeddings to find the closest matching entry.


